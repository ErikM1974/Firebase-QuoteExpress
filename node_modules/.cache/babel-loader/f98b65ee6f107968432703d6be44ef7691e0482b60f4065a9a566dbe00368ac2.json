{"ast":null,"code":"import React,{useState,useCallback,useEffect}from'react';import{db}from'../firebase';import{collection,getDocs,query}from'firebase/firestore';import'./EmbroideryCalculator.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoadingSpinner=()=>/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})});export default function EmbroideryCalculator(){const[productDatabase,setProductDatabase]=useState({});const[orders,setOrders]=useState([{STYLE_No:'',COLOR_NAME:'',quantities:{},error:null}]);const[styles,setStyles]=useState([]);const[colors,setColors]=useState({});const[errorMessage,setErrorMessage]=useState(null);const[isLoading,setIsLoading]=useState(false);const fetchAllStyles=useCallback(async()=>{console.log('Fetching all styles...');setIsLoading(true);try{const stylesQuery=query(collection(db,'embroidery_orders'));console.log('Executing query...');const querySnapshot=await getDocs(stylesQuery);console.log('Query executed. Number of documents:',querySnapshot.size);const stylesData={};const styleSet=new Set();const colorSet=new Set();querySnapshot.forEach(doc=>{const data=doc.data();console.log('Document data:',data);if(data.STYLE_No){styleSet.add(data.STYLE_No);if(!stylesData[data.STYLE_No]){stylesData[data.STYLE_No]=data;}}if(data.COLOR_NAME){colorSet.add(data.COLOR_NAME);}});console.log('Unique styles found:',styleSet.size);setStyles(Array.from(styleSet));setProductDatabase(stylesData);setColors(Array.from(colorSet));console.log('Fetched styles:',stylesData);}catch(err){console.error('Error fetching styles:',err);setErrorMessage('Failed to load styles. Please try again.');}finally{setIsLoading(false);console.log('Finished fetching styles.');}},[]);useEffect(()=>{fetchAllStyles();},[fetchAllStyles]);const addOrder=()=>{setOrders(prevOrders=>[...prevOrders,{STYLE_No:'',COLOR_NAME:'',quantities:{},error:null}]);};return/*#__PURE__*/_jsxs(\"div\",{className:\"embroidery-calculator\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Embroidery Order Form\"}),errorMessage&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",role:\"alert\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Error: \"}),/*#__PURE__*/_jsx(\"span\",{children:errorMessage})]}),isLoading&&/*#__PURE__*/_jsx(LoadingSpinner,{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Available Styles\"}),/*#__PURE__*/_jsx(\"ul\",{children:styles.map(style=>/*#__PURE__*/_jsx(\"li\",{children:style},style))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Available Colors\"}),/*#__PURE__*/_jsx(\"ul\",{children:colors.map(color=>/*#__PURE__*/_jsx(\"li\",{children:color},color))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Product Database\"}),/*#__PURE__*/_jsx(\"pre\",{children:JSON.stringify(productDatabase,null,2)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Orders\"}),/*#__PURE__*/_jsx(\"pre\",{children:JSON.stringify(orders,null,2)}),/*#__PURE__*/_jsx(\"button\",{onClick:addOrder,children:\"Add Order\"})]})]});}","map":{"version":3,"names":["React","useState","useCallback","useEffect","db","collection","getDocs","query","jsx","_jsx","jsxs","_jsxs","LoadingSpinner","className","children","EmbroideryCalculator","productDatabase","setProductDatabase","orders","setOrders","STYLE_No","COLOR_NAME","quantities","error","styles","setStyles","colors","setColors","errorMessage","setErrorMessage","isLoading","setIsLoading","fetchAllStyles","console","log","stylesQuery","querySnapshot","size","stylesData","styleSet","Set","colorSet","forEach","doc","data","add","Array","from","err","addOrder","prevOrders","role","map","style","color","JSON","stringify","onClick"],"sources":["C:/Users/erik/Downloads/embroidered-order-form/src/components/EmbroideryCalculator.js"],"sourcesContent":["import React, { useState, useCallback, useEffect } from 'react';\r\nimport { db } from '../firebase';\r\nimport { collection, getDocs, query } from 'firebase/firestore';\r\nimport './EmbroideryCalculator.css';\r\n\r\nconst LoadingSpinner = () => (\r\n  <div className=\"loading-spinner\">\r\n    <div className=\"spinner\"></div>\r\n  </div>\r\n);\r\n\r\nexport default function EmbroideryCalculator() {\r\n  const [productDatabase, setProductDatabase] = useState({});\r\n  const [orders, setOrders] = useState([\r\n    {\r\n      STYLE_No: '',\r\n      COLOR_NAME: '',\r\n      quantities: {},\r\n      error: null,\r\n    },\r\n  ]);\r\n  const [styles, setStyles] = useState([]);\r\n  const [colors, setColors] = useState({});\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const fetchAllStyles = useCallback(async () => {\r\n    console.log('Fetching all styles...');\r\n    setIsLoading(true);\r\n    try {\r\n      const stylesQuery = query(collection(db, 'embroidery_orders'));\r\n      console.log('Executing query...');\r\n      const querySnapshot = await getDocs(stylesQuery);\r\n      console.log('Query executed. Number of documents:', querySnapshot.size);\r\n      \r\n      const stylesData = {};\r\n      const styleSet = new Set();\r\n      const colorSet = new Set();\r\n      querySnapshot.forEach((doc) => {\r\n        const data = doc.data();\r\n        console.log('Document data:', data);\r\n        if (data.STYLE_No) {\r\n          styleSet.add(data.STYLE_No);\r\n          if (!stylesData[data.STYLE_No]) {\r\n            stylesData[data.STYLE_No] = data;\r\n          }\r\n        }\r\n        if (data.COLOR_NAME) {\r\n          colorSet.add(data.COLOR_NAME);\r\n        }\r\n      });\r\n\r\n      console.log('Unique styles found:', styleSet.size);\r\n      setStyles(Array.from(styleSet));\r\n      setProductDatabase(stylesData);\r\n      setColors(Array.from(colorSet));\r\n      console.log('Fetched styles:', stylesData);\r\n    } catch (err) {\r\n      console.error('Error fetching styles:', err);\r\n      setErrorMessage('Failed to load styles. Please try again.');\r\n    } finally {\r\n      setIsLoading(false);\r\n      console.log('Finished fetching styles.');\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchAllStyles();\r\n  }, [fetchAllStyles]);\r\n\r\n  const addOrder = () => {\r\n    setOrders(prevOrders => [\r\n      ...prevOrders,\r\n      { STYLE_No: '', COLOR_NAME: '', quantities: {}, error: null },\r\n    ]);\r\n  };\r\n\r\n  return (\r\n    <div className=\"embroidery-calculator\">\r\n      <h1>Embroidery Order Form</h1>\r\n      {errorMessage && (\r\n        <div className=\"error-message\" role=\"alert\">\r\n          <strong>Error: </strong>\r\n          <span>{errorMessage}</span>\r\n        </div>\r\n      )}\r\n      {isLoading && <LoadingSpinner />}\r\n      <div>\r\n        <h2>Available Styles</h2>\r\n        <ul>\r\n          {styles.map((style) => (\r\n            <li key={style}>{style}</li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n      <div>\r\n        <h2>Available Colors</h2>\r\n        <ul>\r\n          {colors.map((color) => (\r\n            <li key={color}>{color}</li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n      <div>\r\n        <h2>Product Database</h2>\r\n        <pre>{JSON.stringify(productDatabase, null, 2)}</pre>\r\n      </div>\r\n      <div>\r\n        <h2>Orders</h2>\r\n        <pre>{JSON.stringify(orders, null, 2)}</pre>\r\n        <button onClick={addOrder}>Add Order</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,WAAW,CAAEC,SAAS,KAAQ,OAAO,CAC/D,OAASC,EAAE,KAAQ,aAAa,CAChC,OAASC,UAAU,CAAEC,OAAO,CAAEC,KAAK,KAAQ,oBAAoB,CAC/D,MAAO,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpC,KAAM,CAAAC,cAAc,CAAGA,CAAA,gBACrBH,IAAA,QAAKI,SAAS,CAAC,iBAAiB,CAAAC,QAAA,cAC9BL,IAAA,QAAKI,SAAS,CAAC,SAAS,CAAM,CAAC,CAC5B,CACN,CAED,cAAe,SAAS,CAAAE,oBAAoBA,CAAA,CAAG,CAC7C,KAAM,CAACC,eAAe,CAAEC,kBAAkB,CAAC,CAAGhB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC1D,KAAM,CAACiB,MAAM,CAAEC,SAAS,CAAC,CAAGlB,QAAQ,CAAC,CACnC,CACEmB,QAAQ,CAAE,EAAE,CACZC,UAAU,CAAE,EAAE,CACdC,UAAU,CAAE,CAAC,CAAC,CACdC,KAAK,CAAE,IACT,CAAC,CACF,CAAC,CACF,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGxB,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACyB,MAAM,CAAEC,SAAS,CAAC,CAAG1B,QAAQ,CAAC,CAAC,CAAC,CAAC,CACxC,KAAM,CAAC2B,YAAY,CAAEC,eAAe,CAAC,CAAG5B,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAAC6B,SAAS,CAAEC,YAAY,CAAC,CAAG9B,QAAQ,CAAC,KAAK,CAAC,CAEjD,KAAM,CAAA+B,cAAc,CAAG9B,WAAW,CAAC,SAAY,CAC7C+B,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC,CACrCH,YAAY,CAAC,IAAI,CAAC,CAClB,GAAI,CACF,KAAM,CAAAI,WAAW,CAAG5B,KAAK,CAACF,UAAU,CAACD,EAAE,CAAE,mBAAmB,CAAC,CAAC,CAC9D6B,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC,CACjC,KAAM,CAAAE,aAAa,CAAG,KAAM,CAAA9B,OAAO,CAAC6B,WAAW,CAAC,CAChDF,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAEE,aAAa,CAACC,IAAI,CAAC,CAEvE,KAAM,CAAAC,UAAU,CAAG,CAAC,CAAC,CACrB,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAC,GAAG,CAAC,CAAC,CAC1B,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAD,GAAG,CAAC,CAAC,CAC1BJ,aAAa,CAACM,OAAO,CAAEC,GAAG,EAAK,CAC7B,KAAM,CAAAC,IAAI,CAAGD,GAAG,CAACC,IAAI,CAAC,CAAC,CACvBX,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEU,IAAI,CAAC,CACnC,GAAIA,IAAI,CAACxB,QAAQ,CAAE,CACjBmB,QAAQ,CAACM,GAAG,CAACD,IAAI,CAACxB,QAAQ,CAAC,CAC3B,GAAI,CAACkB,UAAU,CAACM,IAAI,CAACxB,QAAQ,CAAC,CAAE,CAC9BkB,UAAU,CAACM,IAAI,CAACxB,QAAQ,CAAC,CAAGwB,IAAI,CAClC,CACF,CACA,GAAIA,IAAI,CAACvB,UAAU,CAAE,CACnBoB,QAAQ,CAACI,GAAG,CAACD,IAAI,CAACvB,UAAU,CAAC,CAC/B,CACF,CAAC,CAAC,CAEFY,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAEK,QAAQ,CAACF,IAAI,CAAC,CAClDZ,SAAS,CAACqB,KAAK,CAACC,IAAI,CAACR,QAAQ,CAAC,CAAC,CAC/BtB,kBAAkB,CAACqB,UAAU,CAAC,CAC9BX,SAAS,CAACmB,KAAK,CAACC,IAAI,CAACN,QAAQ,CAAC,CAAC,CAC/BR,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAEI,UAAU,CAAC,CAC5C,CAAE,MAAOU,GAAG,CAAE,CACZf,OAAO,CAACV,KAAK,CAAC,wBAAwB,CAAEyB,GAAG,CAAC,CAC5CnB,eAAe,CAAC,0CAA0C,CAAC,CAC7D,CAAC,OAAS,CACRE,YAAY,CAAC,KAAK,CAAC,CACnBE,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC,CAC1C,CACF,CAAC,CAAE,EAAE,CAAC,CAEN/B,SAAS,CAAC,IAAM,CACd6B,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,CAACA,cAAc,CAAC,CAAC,CAEpB,KAAM,CAAAiB,QAAQ,CAAGA,CAAA,GAAM,CACrB9B,SAAS,CAAC+B,UAAU,EAAI,CACtB,GAAGA,UAAU,CACb,CAAE9B,QAAQ,CAAE,EAAE,CAAEC,UAAU,CAAE,EAAE,CAAEC,UAAU,CAAE,CAAC,CAAC,CAAEC,KAAK,CAAE,IAAK,CAAC,CAC9D,CAAC,CACJ,CAAC,CAED,mBACEZ,KAAA,QAAKE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACpCL,IAAA,OAAAK,QAAA,CAAI,uBAAqB,CAAI,CAAC,CAC7Bc,YAAY,eACXjB,KAAA,QAAKE,SAAS,CAAC,eAAe,CAACsC,IAAI,CAAC,OAAO,CAAArC,QAAA,eACzCL,IAAA,WAAAK,QAAA,CAAQ,SAAO,CAAQ,CAAC,cACxBL,IAAA,SAAAK,QAAA,CAAOc,YAAY,CAAO,CAAC,EACxB,CACN,CACAE,SAAS,eAAIrB,IAAA,CAACG,cAAc,GAAE,CAAC,cAChCD,KAAA,QAAAG,QAAA,eACEL,IAAA,OAAAK,QAAA,CAAI,kBAAgB,CAAI,CAAC,cACzBL,IAAA,OAAAK,QAAA,CACGU,MAAM,CAAC4B,GAAG,CAAEC,KAAK,eAChB5C,IAAA,OAAAK,QAAA,CAAiBuC,KAAK,EAAbA,KAAkB,CAC5B,CAAC,CACA,CAAC,EACF,CAAC,cACN1C,KAAA,QAAAG,QAAA,eACEL,IAAA,OAAAK,QAAA,CAAI,kBAAgB,CAAI,CAAC,cACzBL,IAAA,OAAAK,QAAA,CACGY,MAAM,CAAC0B,GAAG,CAAEE,KAAK,eAChB7C,IAAA,OAAAK,QAAA,CAAiBwC,KAAK,EAAbA,KAAkB,CAC5B,CAAC,CACA,CAAC,EACF,CAAC,cACN3C,KAAA,QAAAG,QAAA,eACEL,IAAA,OAAAK,QAAA,CAAI,kBAAgB,CAAI,CAAC,cACzBL,IAAA,QAAAK,QAAA,CAAMyC,IAAI,CAACC,SAAS,CAACxC,eAAe,CAAE,IAAI,CAAE,CAAC,CAAC,CAAM,CAAC,EAClD,CAAC,cACNL,KAAA,QAAAG,QAAA,eACEL,IAAA,OAAAK,QAAA,CAAI,QAAM,CAAI,CAAC,cACfL,IAAA,QAAAK,QAAA,CAAMyC,IAAI,CAACC,SAAS,CAACtC,MAAM,CAAE,IAAI,CAAE,CAAC,CAAC,CAAM,CAAC,cAC5CT,IAAA,WAAQgD,OAAO,CAAER,QAAS,CAAAnC,QAAA,CAAC,WAAS,CAAQ,CAAC,EAC1C,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}