{"ast":null,"code":"import React,{useState,useEffect}from'react';import{PDFDownloadLink}from'@react-pdf/renderer';import LineItem from'./LineItem';import OrderPDF from'./OrderPDF';import'./EmbroideryCalculator.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function EmbroideryCalculator(){const[lineItems,setLineItems]=useState([]);const[totalGarmentQuantity,setTotalGarmentQuantity]=useState(0);const[totalCapQuantity,setTotalCapQuantity]=useState(0);const[totalGarmentPrice,setTotalGarmentPrice]=useState(0);const[totalCapPrice,setTotalCapPrice]=useState(0);useEffect(()=>{calculateTotals();},[lineItems]);const addLineItem=()=>{setLineItems([...lineItems,{}]);};const removeLineItem=index=>{const newLineItems=lineItems.filter((_,i)=>i!==index);setLineItems(newLineItems);};const handleQuantityChange=(index,newTotalQuantity,isCap)=>{const newLineItems=[...lineItems];const oldQuantity=newLineItems[index].totalQuantity||0;const quantityDifference=newTotalQuantity-oldQuantity;newLineItems[index]={...newLineItems[index],totalQuantity:newTotalQuantity,isCap};setLineItems(newLineItems);if(isCap){setTotalCapQuantity(prev=>prev+quantityDifference);}else{setTotalGarmentQuantity(prev=>prev+quantityDifference);}};const handlePriceChange=(index,price,isCap)=>{const newLineItems=[...lineItems];const oldPrice=newLineItems[index].price||0;const priceDifference=price-oldPrice;newLineItems[index]={...newLineItems[index],price,isCap};setLineItems(newLineItems);if(isCap){setTotalCapPrice(prev=>prev+priceDifference);}else{setTotalGarmentPrice(prev=>prev+priceDifference);}};const calculateTotals=()=>{let garmentQuantity=0;let capQuantity=0;let garmentPrice=0;let capPrice=0;lineItems.forEach(item=>{if(item.isCap){capQuantity+=item.totalQuantity||0;capPrice+=item.price||0;}else{garmentQuantity+=item.totalQuantity||0;garmentPrice+=item.price||0;}});setTotalGarmentQuantity(garmentQuantity);setTotalCapQuantity(capQuantity);setTotalGarmentPrice(garmentPrice);setTotalCapPrice(capPrice);};const isOrderValid=()=>{return(totalGarmentQuantity>=6||totalCapQuantity>=2)&&lineItems.length>0;};return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-100 min-h-screen p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto bg-white rounded-lg shadow-lg overflow-hidden\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-green-600 p-4 bg-green-100\",children:\"Embroidery Order Form\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[lineItems.map((item,index)=>/*#__PURE__*/_jsx(LineItem,{onRemove:()=>removeLineItem(index),onQuantityChange:(newTotalQuantity,isCap)=>handleQuantityChange(index,newTotalQuantity,isCap),onPriceChange:(price,isCap)=>handlePriceChange(index,price,isCap),totalGarmentQuantity:totalGarmentQuantity,totalCapQuantity:totalCapQuantity},index)),/*#__PURE__*/_jsx(\"button\",{onClick:addLineItem,className:\"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"Add Item\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-gray-200\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold\",children:\"Order Summary\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total Garment Quantity: \",totalGarmentQuantity]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Garment Subtotal: $\",totalGarmentPrice.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total Cap Quantity: \",totalCapQuantity]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Cap Subtotal: $\",totalCapPrice.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total Price: $\",(totalGarmentPrice+totalCapPrice).toFixed(2)]}),!isOrderValid()&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500\",children:\"Minimum order: 6 garments or 2 caps\"}),/*#__PURE__*/_jsx(PDFDownloadLink,{document:/*#__PURE__*/_jsx(OrderPDF,{lineItems:lineItems,totalGarmentQuantity:totalGarmentQuantity,totalCapQuantity:totalCapQuantity,totalPrice:totalGarmentPrice+totalCapPrice}),fileName:\"embroidery_order.pdf\",className:\"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 inline-block\",children:_ref=>{let{blob,url,loading,error}=_ref;return loading?'Generating PDF...':'Download PDF';}})]})]})});}","map":{"version":3,"names":["React","useState","useEffect","PDFDownloadLink","LineItem","OrderPDF","jsx","_jsx","jsxs","_jsxs","EmbroideryCalculator","lineItems","setLineItems","totalGarmentQuantity","setTotalGarmentQuantity","totalCapQuantity","setTotalCapQuantity","totalGarmentPrice","setTotalGarmentPrice","totalCapPrice","setTotalCapPrice","calculateTotals","addLineItem","removeLineItem","index","newLineItems","filter","_","i","handleQuantityChange","newTotalQuantity","isCap","oldQuantity","totalQuantity","quantityDifference","prev","handlePriceChange","price","oldPrice","priceDifference","garmentQuantity","capQuantity","garmentPrice","capPrice","forEach","item","isOrderValid","length","className","children","map","onRemove","onQuantityChange","onPriceChange","onClick","toFixed","document","totalPrice","fileName","_ref","blob","url","loading","error"],"sources":["C:/Users/erik/Downloads/embroidered-order-form/src/components/EmbroideryCalculator.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { PDFDownloadLink } from '@react-pdf/renderer';\r\nimport LineItem from './LineItem';\r\nimport OrderPDF from './OrderPDF';\r\nimport './EmbroideryCalculator.css';\r\n\r\nexport default function EmbroideryCalculator() {\r\n  const [lineItems, setLineItems] = useState([]);\r\n  const [totalGarmentQuantity, setTotalGarmentQuantity] = useState(0);\r\n  const [totalCapQuantity, setTotalCapQuantity] = useState(0);\r\n  const [totalGarmentPrice, setTotalGarmentPrice] = useState(0);\r\n  const [totalCapPrice, setTotalCapPrice] = useState(0);\r\n\r\n  useEffect(() => {\r\n    calculateTotals();\r\n  }, [lineItems]);\r\n\r\n  const addLineItem = () => {\r\n    setLineItems([...lineItems, {}]);\r\n  };\r\n\r\n  const removeLineItem = (index) => {\r\n    const newLineItems = lineItems.filter((_, i) => i !== index);\r\n    setLineItems(newLineItems);\r\n  };\r\n\r\n  const handleQuantityChange = (index, newTotalQuantity, isCap) => {\r\n    const newLineItems = [...lineItems];\r\n    const oldQuantity = newLineItems[index].totalQuantity || 0;\r\n    const quantityDifference = newTotalQuantity - oldQuantity;\r\n\r\n    newLineItems[index] = { ...newLineItems[index], totalQuantity: newTotalQuantity, isCap };\r\n    setLineItems(newLineItems);\r\n\r\n    if (isCap) {\r\n      setTotalCapQuantity(prev => prev + quantityDifference);\r\n    } else {\r\n      setTotalGarmentQuantity(prev => prev + quantityDifference);\r\n    }\r\n  };\r\n\r\n  const handlePriceChange = (index, price, isCap) => {\r\n    const newLineItems = [...lineItems];\r\n    const oldPrice = newLineItems[index].price || 0;\r\n    const priceDifference = price - oldPrice;\r\n\r\n    newLineItems[index] = { ...newLineItems[index], price, isCap };\r\n    setLineItems(newLineItems);\r\n\r\n    if (isCap) {\r\n      setTotalCapPrice(prev => prev + priceDifference);\r\n    } else {\r\n      setTotalGarmentPrice(prev => prev + priceDifference);\r\n    }\r\n  };\r\n\r\n  const calculateTotals = () => {\r\n    let garmentQuantity = 0;\r\n    let capQuantity = 0;\r\n    let garmentPrice = 0;\r\n    let capPrice = 0;\r\n\r\n    lineItems.forEach(item => {\r\n      if (item.isCap) {\r\n        capQuantity += item.totalQuantity || 0;\r\n        capPrice += item.price || 0;\r\n      } else {\r\n        garmentQuantity += item.totalQuantity || 0;\r\n        garmentPrice += item.price || 0;\r\n      }\r\n    });\r\n\r\n    setTotalGarmentQuantity(garmentQuantity);\r\n    setTotalCapQuantity(capQuantity);\r\n    setTotalGarmentPrice(garmentPrice);\r\n    setTotalCapPrice(capPrice);\r\n  };\r\n\r\n  const isOrderValid = () => {\r\n    return (totalGarmentQuantity >= 6 || totalCapQuantity >= 2) && lineItems.length > 0;\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-gray-100 min-h-screen p-4\">\r\n      <div className=\"max-w-7xl mx-auto bg-white rounded-lg shadow-lg overflow-hidden\">\r\n        <h1 className=\"text-2xl font-bold text-green-600 p-4 bg-green-100\">\r\n          Embroidery Order Form\r\n        </h1>\r\n        <div className=\"p-4\">\r\n          {lineItems.map((item, index) => (\r\n            <LineItem\r\n              key={index}\r\n              onRemove={() => removeLineItem(index)}\r\n              onQuantityChange={(newTotalQuantity, isCap) => handleQuantityChange(index, newTotalQuantity, isCap)}\r\n              onPriceChange={(price, isCap) => handlePriceChange(index, price, isCap)}\r\n              totalGarmentQuantity={totalGarmentQuantity}\r\n              totalCapQuantity={totalCapQuantity}\r\n            />\r\n          ))}\r\n          <button\r\n            onClick={addLineItem}\r\n            className=\"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\r\n          >\r\n            Add Item\r\n          </button>\r\n        </div>\r\n        <div className=\"p-4 bg-gray-200\">\r\n          <h2 className=\"text-xl font-bold\">Order Summary</h2>\r\n          <p>Total Garment Quantity: {totalGarmentQuantity}</p>\r\n          <p>Garment Subtotal: ${totalGarmentPrice.toFixed(2)}</p>\r\n          <p>Total Cap Quantity: {totalCapQuantity}</p>\r\n          <p>Cap Subtotal: ${totalCapPrice.toFixed(2)}</p>\r\n          <p>Total Price: ${(totalGarmentPrice + totalCapPrice).toFixed(2)}</p>\r\n          {!isOrderValid() && (\r\n            <p className=\"text-red-500\">\r\n              Minimum order: 6 garments or 2 caps\r\n            </p>\r\n          )}\r\n          <PDFDownloadLink\r\n            document={\r\n              <OrderPDF\r\n                lineItems={lineItems}\r\n                totalGarmentQuantity={totalGarmentQuantity}\r\n                totalCapQuantity={totalCapQuantity}\r\n                totalPrice={totalGarmentPrice + totalCapPrice}\r\n              />\r\n            }\r\n            fileName=\"embroidery_order.pdf\"\r\n            className=\"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 inline-block\"\r\n          >\r\n            {({ blob, url, loading, error }) =>\r\n              loading ? 'Generating PDF...' : 'Download PDF'\r\n            }\r\n          </PDFDownloadLink>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}